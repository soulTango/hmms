<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.mapper.ReturMapper" >
  <resultMap id="BaseResultMap" type="org.bean.Retur" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 24 17:22:01 CST 2018.
    -->
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="pinyinma" property="pinyinma" jdbcType="VARCHAR" />
    <result column="drugname" property="drugname" jdbcType="VARCHAR" />
    <result column="pihao" property="pihao" jdbcType="VARCHAR" />
    <result column="pizhunwenhao" property="pizhunwenhao" jdbcType="VARCHAR" />
    <result column="ramount" property="ramount" jdbcType="INTEGER" />
    <result column="inprice" property="inprice" jdbcType="DECIMAL" />
    <result column="allprice" property="allprice" jdbcType="DECIMAL" />
    <result column="rtime" property="rtime" jdbcType="DATE" />
    <result column="operator" property="operator" jdbcType="VARCHAR" />
    <result column="reason" property="reason" jdbcType="VARCHAR" />
  </resultMap>
  
  <select id="getSellAmount" resultType="org.bean.Sell"  >
    select * 
    from sell
    where pinyinma = #{pinyinma,jdbcType=INTEGER} and drugname = #{drugname,jdbcType=INTEGER}
    and pihao = #{pihao,jdbcType=INTEGER} and  pizhunwenhao= #{pizhunwenhao,jdbcType=INTEGER}
  </select>
  
  <select id="getSelAmount" resultType="org.bean.Sell"  >
    select * 
    from sell
    where pinyinma = #{pinyinma,jdbcType=INTEGER} and drugname = #{drugname,jdbcType=INTEGER}
  </select>
  
  <insert id="addReturnDrug" parameterType="org.bean.Retur" >
    insert into retur (pinyinma, drugname, pihao, pizhunwenhao, ramount, 
      inprice, allprice, rtime, operator, reason)
    values (#{pinyinma}, #{drugname}, #{pihao}, #{pizhunwenhao}, #{ramount},
    #{inprice}, #{allprice}, date_format(now(),'%y-%m-%d'), 
    #{operator}, #{reason,jdbcType=VARCHAR})
  </insert>
  
  <select id="getReturnDrugInfo" resultType="org.bean.Retur"  >
    select * from retur where 1=1
		<if test="pinyinma != null and pinyinma !=''">
			AND pinyinma LIKE '%' #{pinyinma} '%'
		</if>
		<if test="drugname != null and drugname !=''">
			AND drugname LIKE '%' #{drugname} '%'
		</if>
		<if test="dateStart != null and dateStart !=''">
			AND rtime >=
			str_to_date(#{dateStart,jdbcType=VARCHAR}, '%Y-%m-%d')
		</if>
		<if test="dateEnd != null and dateEnd !=''">
		<![CDATA[
			AND rtime <=
			str_to_date(#{dateEnd,jdbcType=VARCHAR}, '%Y-%m-%d')
		]]>
		</if>
  </select>
  
  <select id="getReturAmount" resultType="org.bean.Retur"  >
    select * 
    from retur
    where pinyinma = #{pinyinma,jdbcType=INTEGER} and drugname = #{drugname,jdbcType=INTEGER}
    and pihao = #{pihao,jdbcType=INTEGER} and  pizhunwenhao= #{pizhunwenhao,jdbcType=INTEGER}
  </select>
  
  <select id="getReAmount" resultType="org.bean.Retur"  >
    select * 
    from retur
    where pinyinma = #{pinyinma,jdbcType=INTEGER} and drugname = #{drugname,jdbcType=INTEGER}
  </select>
  
  
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 24 17:22:01 CST 2018.
    -->
    id, pinyinma, drugname, pihao, pizhunwenhao, ramount, inprice, allprice, rtime, operator, 
    reason
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 24 17:22:01 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from retur
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 24 17:22:01 CST 2018.
    -->
    delete from retur
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="org.bean.Retur" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 24 17:22:01 CST 2018.
    -->
    insert into retur (id, pinyinma, drugname, 
      pihao, pizhunwenhao, ramount, 
      inprice, allprice, rtime, 
      operator, reason)
    values (#{id,jdbcType=INTEGER}, #{pinyinma,jdbcType=VARCHAR}, #{drugname,jdbcType=VARCHAR}, 
      #{pihao,jdbcType=VARCHAR}, #{pizhunwenhao,jdbcType=VARCHAR}, #{ramount,jdbcType=INTEGER}, 
      #{inprice,jdbcType=DECIMAL}, #{allprice,jdbcType=DECIMAL}, #{rtime,jdbcType=DATE}, 
      #{operator,jdbcType=VARCHAR}, #{reason,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="org.bean.Retur" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 24 17:22:01 CST 2018.
    -->
    insert into retur
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="pinyinma != null" >
        pinyinma,
      </if>
      <if test="drugname != null" >
        drugname,
      </if>
      <if test="pihao != null" >
        pihao,
      </if>
      <if test="pizhunwenhao != null" >
        pizhunwenhao,
      </if>
      <if test="ramount != null" >
        ramount,
      </if>
      <if test="inprice != null" >
        inprice,
      </if>
      <if test="allprice != null" >
        allprice,
      </if>
      <if test="rtime != null" >
        rtime,
      </if>
      <if test="operator != null" >
        operator,
      </if>
      <if test="reason != null" >
        reason,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="pinyinma != null" >
        #{pinyinma,jdbcType=VARCHAR},
      </if>
      <if test="drugname != null" >
        #{drugname,jdbcType=VARCHAR},
      </if>
      <if test="pihao != null" >
        #{pihao,jdbcType=VARCHAR},
      </if>
      <if test="pizhunwenhao != null" >
        #{pizhunwenhao,jdbcType=VARCHAR},
      </if>
      <if test="ramount != null" >
        #{ramount,jdbcType=INTEGER},
      </if>
      <if test="inprice != null" >
        #{inprice,jdbcType=DECIMAL},
      </if>
      <if test="allprice != null" >
        #{allprice,jdbcType=DECIMAL},
      </if>
      <if test="rtime != null" >
        #{rtime,jdbcType=DATE},
      </if>
      <if test="operator != null" >
        #{operator,jdbcType=VARCHAR},
      </if>
      <if test="reason != null" >
        #{reason,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="org.bean.Retur" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 24 17:22:01 CST 2018.
    -->
    update retur
    <set >
      <if test="pinyinma != null" >
        pinyinma = #{pinyinma,jdbcType=VARCHAR},
      </if>
      <if test="drugname != null" >
        drugname = #{drugname,jdbcType=VARCHAR},
      </if>
      <if test="pihao != null" >
        pihao = #{pihao,jdbcType=VARCHAR},
      </if>
      <if test="pizhunwenhao != null" >
        pizhunwenhao = #{pizhunwenhao,jdbcType=VARCHAR},
      </if>
      <if test="ramount != null" >
        ramount = #{ramount,jdbcType=INTEGER},
      </if>
      <if test="inprice != null" >
        inprice = #{inprice,jdbcType=DECIMAL},
      </if>
      <if test="allprice != null" >
        allprice = #{allprice,jdbcType=DECIMAL},
      </if>
      <if test="rtime != null" >
        rtime = #{rtime,jdbcType=DATE},
      </if>
      <if test="operator != null" >
        operator = #{operator,jdbcType=VARCHAR},
      </if>
      <if test="reason != null" >
        reason = #{reason,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="org.bean.Retur" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Apr 24 17:22:01 CST 2018.
    -->
    update retur
    set pinyinma = #{pinyinma,jdbcType=VARCHAR},
      drugname = #{drugname,jdbcType=VARCHAR},
      pihao = #{pihao,jdbcType=VARCHAR},
      pizhunwenhao = #{pizhunwenhao,jdbcType=VARCHAR},
      ramount = #{ramount,jdbcType=INTEGER},
      inprice = #{inprice,jdbcType=DECIMAL},
      allprice = #{allprice,jdbcType=DECIMAL},
      rtime = #{rtime,jdbcType=DATE},
      operator = #{operator,jdbcType=VARCHAR},
      reason = #{reason,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
</mapper>