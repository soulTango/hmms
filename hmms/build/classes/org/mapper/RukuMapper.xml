<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.mapper.RukuMapper">
	<resultMap id="BaseResultMap" type="org.bean.Ruku">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 19 
			16:37:39 CST 2018. -->
		<id column="id" property="id" jdbcType="INTEGER" />
		<result column="pinyima" property="pinyima" jdbcType="VARCHAR" />
		<result column="drugname" property="drugname" jdbcType="VARCHAR" />
		<result column="pihao" property="pihao" jdbcType="VARCHAR" />
		<result column="pizhunwenhao" property="pizhunwenhao" jdbcType="VARCHAR" />
		<result column="spec" property="spec" jdbcType="VARCHAR" />
		<result column="unit" property="unit" jdbcType="VARCHAR" />
		<result column="amount" property="amount" jdbcType="INTEGER" />
		<result column="inprice" property="inprice" jdbcType="DECIMAL" />
		<result column="allprice" property="allprice" jdbcType="DECIMAL" />
		<result column="intime" property="intime" jdbcType="DATE" />
		<result column="infrom" property="infrom" jdbcType="VARCHAR" />
		<result column="factory" property="factory" jdbcType="VARCHAR" />
		<result column="producedate" property="producedate" jdbcType="DATE" />
		<result column="usefuldate" property="usefuldate" jdbcType="DATE" />
		<result column="operator" property="operator" jdbcType="VARCHAR" />
		<result column="remark" property="remark" jdbcType="VARCHAR" />
	</resultMap>

	<select id="getDrugInInfo" resultType="org.bean.Ruku"
		parameterType="org.bean.Ruku">
		select * from ruku where 1=1
		<if test="pinyinma != null and pinyinma !=''">
			AND pinyinma LIKE '%' #{pinyinma} '%'
		</if>
		<if test="drugname != null and drugname !=''">
			AND drugname LIKE '%' #{drugname} '%'
		</if>
		<if test="dateStart != null and dateStart !=''">
			AND intime >=
			str_to_date(#{dateStart,jdbcType=VARCHAR}, '%Y-%m-%d')
		</if>
		<if test="dateEnd != null and dateEnd !=''">
		<![CDATA[
			AND intime <=
			str_to_date(#{dateEnd,jdbcType=VARCHAR}, '%Y-%m-%d')
		]]>
		</if>
		<if test="sfth != null and sfth !=''">
			AND  sfth = 'N'
		</if>
	</select>
	
	<select id="getUSDrugInfo" resultType="org.bean.Ruku"
		parameterType="org.bean.Ruku">
		select * from ruku where 1=1
		<if test="pinyinma != null and pinyinma !=''">
			AND pinyinma LIKE '%' #{pinyinma} '%'
		</if>
		<if test="drugname != null and drugname !=''">
			AND drugname LIKE '%' #{drugname} '%'
		</if>
		<if test="dateStart != null and dateStart !=''">
			AND intime >=
			str_to_date(#{dateStart,jdbcType=VARCHAR}, '%Y-%m-%d')
		</if>
		<if test="dateEnd != null and dateEnd !=''">
		<![CDATA[
			AND intime <=
			str_to_date(#{dateEnd,jdbcType=VARCHAR}, '%Y-%m-%d')
		]]>
		</if>
		<if test="sfxs != null and sfxs !=''">
			AND  sfxs = 'N'
		</if>
	</select>
	
	<update id="updateDrugInInfo" parameterType="org.bean.Ruku" >
    update ruku
     set spec = #{spec,jdbcType=VARCHAR},
     unit = #{unit,jdbcType=VARCHAR},
     amount = #{amount},
     inprice = #{inprice},sellprice = #{sellprice},
     allprice = #{allprice},
     intime = #{intime},infrom = #{infrom},
     factory = #{factory},producedate = #{producedate},
     usefuldate = #{usefuldate},operator = #{operator},
     remark = #{remark,jdbcType=VARCHAR}
    where pinyinma = #{pinyinma,jdbcType=VARCHAR}
    and drugname = #{drugname,jdbcType=VARCHAR}
    and pihao = #{pihao,jdbcType=VARCHAR}
    and pizhunwenhao = #{pizhunwenhao,jdbcType=VARCHAR}
  </update>
  
  <delete id="deleteDrugInInfo" parameterType="org.bean.Ruku" >
    delete from ruku
    where  pinyinma= #{pinyinma,jdbcType=VARCHAR}
    and drugname= #{drugname,jdbcType=VARCHAR}
    and pihao= #{pihao,jdbcType=VARCHAR}
    and pizhunwenhao= #{pizhunwenhao,jdbcType=VARCHAR}
  </delete>
  
  <select id="getIsHave" resultType="org.bean.Ruku" parameterType="org.bean.Ruku">
  	select * from ruku 
  	where pinyinma = #{pinyinma,jdbcType=VARCHAR}
  	and drugname = #{drugname,jdbcType=VARCHAR}
  	and pihao = #{pihao,jdbcType=VARCHAR}
  	and pizhunwenhao = #{pizhunwenhao,jdbcType=VARCHAR}
  </select>
  
  <insert id="addDrugInInfo" parameterType="org.bean.Ruku" >
    insert into ruku (pinyinma, drugname, pihao, pizhunwenhao, spec, 
      unit, amount, inprice, sellprice, allprice, intime, infrom, 
      factory, producedate, usefuldate, operator ,remark)
    values (#{pinyinma}, #{drugname}, #{pihao}, #{pizhunwenhao}, #{spec},
    #{unit}, #{amount}, #{inprice}, #{sellprice}, #{allprice}, date_format(now(),'%y-%m-%d'), #{infrom},
    #{factory}, date_format(#{producedate}, '%y-%m-%d'), date_format(#{usefuldate}, '%y-%m-%d'),
    #{operator}, #{remark,jdbcType=VARCHAR})
  </insert>
  
  <update id="setSfth" parameterType="org.bean.Ruku" >
    update ruku
     set sfth = 'Y'
    where pinyinma = #{pinyinma,jdbcType=VARCHAR}
    and drugname = #{drugname,jdbcType=VARCHAR}
    and pihao = #{pihao,jdbcType=VARCHAR}
    and pizhunwenhao = #{pizhunwenhao,jdbcType=VARCHAR}
  </update>
  
  <select id="getRukuAmount" resultType="org.bean.Ruku">
  	select * from ruku 
  	where pinyinma = #{pinyinma,jdbcType=VARCHAR}
  	and drugname = #{drugname,jdbcType=VARCHAR}
  	and pihao = #{pihao,jdbcType=VARCHAR}
  	and pizhunwenhao = #{pizhunwenhao,jdbcType=VARCHAR}
  </select>
	
	<update id="setSfxs" parameterType="org.bean.Ruku" >
    update ruku
     set sfxs = 'Y'
    where pinyinma = #{pinyinma,jdbcType=VARCHAR}
    and drugname = #{drugname,jdbcType=VARCHAR}
    and pihao = #{pihao,jdbcType=VARCHAR}
    and pizhunwenhao = #{pizhunwenhao,jdbcType=VARCHAR}
  </update>

	<select id="getRukAmount" resultType="org.bean.Ruku">
  	select * from ruku 
  	where pinyinma = #{pinyinma,jdbcType=VARCHAR}
  	and drugname = #{drugname,jdbcType=VARCHAR}
  </select>


	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 19 
			16:37:39 CST 2018. -->
		id, pinyima, drugname, pihao, pizhunwenhao, spec, unit, amount,
		inprice, allprice,
		intime, infrom, factory, producedate, usefuldate, operator, remark
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 19 
			16:37:39 CST 2018. -->
		select
		<include refid="Base_Column_List" />
		from ruku
		where id = #{id,jdbcType=INTEGER}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 19 
			16:37:39 CST 2018. -->
		delete from ruku
		where id = #{id,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="org.bean.Ruku">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 19 
			16:37:39 CST 2018. -->
		insert into ruku (id, pinyima, drugname,
		pihao, pizhunwenhao, spec,
		unit, amount, inprice,
		allprice, intime, infrom,
		factory, producedate, usefuldate,
		operator, remark)
		values (#{id,jdbcType=INTEGER}, #{pinyima,jdbcType=VARCHAR},
		#{drugname,jdbcType=VARCHAR},
		#{pihao,jdbcType=VARCHAR}, #{pizhunwenhao,jdbcType=VARCHAR}, #{spec,jdbcType=VARCHAR},
		#{unit,jdbcType=VARCHAR}, #{amount,jdbcType=INTEGER},
		#{inprice,jdbcType=DECIMAL},
		#{allprice,jdbcType=DECIMAL}, #{intime,jdbcType=DATE}, #{infrom,jdbcType=VARCHAR},
		#{factory,jdbcType=VARCHAR}, #{producedate,jdbcType=DATE},
		#{usefuldate,jdbcType=DATE},
		#{operator,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="org.bean.Ruku">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 19 
			16:37:39 CST 2018. -->
		insert into ruku
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="pinyima != null">
				pinyima,
			</if>
			<if test="drugname != null">
				drugname,
			</if>
			<if test="pihao != null">
				pihao,
			</if>
			<if test="pizhunwenhao != null">
				pizhunwenhao,
			</if>
			<if test="spec != null">
				spec,
			</if>
			<if test="unit != null">
				unit,
			</if>
			<if test="amount != null">
				amount,
			</if>
			<if test="inprice != null">
				inprice,
			</if>
			<if test="allprice != null">
				allprice,
			</if>
			<if test="intime != null">
				intime,
			</if>
			<if test="infrom != null">
				infrom,
			</if>
			<if test="factory != null">
				factory,
			</if>
			<if test="producedate != null">
				producedate,
			</if>
			<if test="usefuldate != null">
				usefuldate,
			</if>
			<if test="operator != null">
				operator,
			</if>
			<if test="remark != null">
				remark,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="pinyima != null">
				#{pinyima,jdbcType=VARCHAR},
			</if>
			<if test="drugname != null">
				#{drugname,jdbcType=VARCHAR},
			</if>
			<if test="pihao != null">
				#{pihao,jdbcType=VARCHAR},
			</if>
			<if test="pizhunwenhao != null">
				#{pizhunwenhao,jdbcType=VARCHAR},
			</if>
			<if test="spec != null">
				#{spec,jdbcType=VARCHAR},
			</if>
			<if test="unit != null">
				#{unit,jdbcType=VARCHAR},
			</if>
			<if test="amount != null">
				#{amount,jdbcType=INTEGER},
			</if>
			<if test="inprice != null">
				#{inprice,jdbcType=DECIMAL},
			</if>
			<if test="allprice != null">
				#{allprice,jdbcType=DECIMAL},
			</if>
			<if test="intime != null">
				#{intime,jdbcType=DATE},
			</if>
			<if test="infrom != null">
				#{infrom,jdbcType=VARCHAR},
			</if>
			<if test="factory != null">
				#{factory,jdbcType=VARCHAR},
			</if>
			<if test="producedate != null">
				#{producedate,jdbcType=DATE},
			</if>
			<if test="usefuldate != null">
				#{usefuldate,jdbcType=DATE},
			</if>
			<if test="operator != null">
				#{operator,jdbcType=VARCHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="org.bean.Ruku">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 19 
			16:37:39 CST 2018. -->
		update ruku
		<set>
			<if test="pinyima != null">
				pinyima = #{pinyima,jdbcType=VARCHAR},
			</if>
			<if test="drugname != null">
				drugname = #{drugname,jdbcType=VARCHAR},
			</if>
			<if test="pihao != null">
				pihao = #{pihao,jdbcType=VARCHAR},
			</if>
			<if test="pizhunwenhao != null">
				pizhunwenhao = #{pizhunwenhao,jdbcType=VARCHAR},
			</if>
			<if test="spec != null">
				spec = #{spec,jdbcType=VARCHAR},
			</if>
			<if test="unit != null">
				unit = #{unit,jdbcType=VARCHAR},
			</if>
			<if test="amount != null">
				amount = #{amount,jdbcType=INTEGER},
			</if>
			<if test="inprice != null">
				inprice = #{inprice,jdbcType=DECIMAL},
			</if>
			<if test="allprice != null">
				allprice = #{allprice,jdbcType=DECIMAL},
			</if>
			<if test="intime != null">
				intime = #{intime,jdbcType=DATE},
			</if>
			<if test="infrom != null">
				infrom = #{infrom,jdbcType=VARCHAR},
			</if>
			<if test="factory != null">
				factory = #{factory,jdbcType=VARCHAR},
			</if>
			<if test="producedate != null">
				producedate = #{producedate,jdbcType=DATE},
			</if>
			<if test="usefuldate != null">
				usefuldate = #{usefuldate,jdbcType=DATE},
			</if>
			<if test="operator != null">
				operator = #{operator,jdbcType=VARCHAR},
			</if>
			<if test="remark != null">
				remark = #{remark,jdbcType=VARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="org.bean.Ruku">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Thu Apr 19 
			16:37:39 CST 2018. -->
		update ruku
		set pinyima = #{pinyima,jdbcType=VARCHAR},
		drugname = #{drugname,jdbcType=VARCHAR},
		pihao = #{pihao,jdbcType=VARCHAR},
		pizhunwenhao = #{pizhunwenhao,jdbcType=VARCHAR},
		spec = #{spec,jdbcType=VARCHAR},
		unit = #{unit,jdbcType=VARCHAR},
		amount = #{amount,jdbcType=INTEGER},
		inprice = #{inprice,jdbcType=DECIMAL},
		allprice = #{allprice,jdbcType=DECIMAL},
		intime = #{intime,jdbcType=DATE},
		infrom = #{infrom,jdbcType=VARCHAR},
		factory = #{factory,jdbcType=VARCHAR},
		producedate = #{producedate,jdbcType=DATE},
		usefuldate = #{usefuldate,jdbcType=DATE},
		operator = #{operator,jdbcType=VARCHAR},
		remark = #{remark,jdbcType=VARCHAR}
		where id = #{id,jdbcType=INTEGER}
	</update>
</mapper>